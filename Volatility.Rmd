---
title: "VIX"
author: "Luca Viviani"
date: "2024-05-20"
output: html_document
---

```{r setup, include=FALSE}
options(repos = "http://cran.us.r-project.org") 
knitr::opts_chunk$set(echo = TRUE)
```

## VIX

As for Investopedia, VIX is defined as an index that shows the expected level of price fluctuation in the S&P 500 Index options over the next 30 days. Market analysts refers to it as the "fear index" basing the intuition to the facts that VIX synthetize the sentiment and the expected volatility.

An high level of VIX reflect an expectation of high volatility in the next few weeks. Low level of VIX might imply lower expectation of price swings and calmer market, low level of risk.

**VIX focus maninly on the US Stock Market - S&P 500**

The volatility is derived from options prices for the S&P 500, the stock market index that tracks 500 large companies.

```{r}
install.packages("fpp3")
library("fpp3")

vix<-read.csv("https://raw.githubusercontent.com/slevin95/Forecast-for-finance/main/VIX.csv")
spx<-read.csv("https://raw.githubusercontent.com/slevin95/Forecast-for-finance/main/SPX.csv")

head(vix)
```

## Exploratory analysis and Models

**Trading happens in the underlying options contracts**, not the VIX. So, you'll see volume data associated with specific VIX options contracts, but not the VIX index directly.

```{r pressure, echo=FALSE}
plot(vix$Adj.Close, type = "l", main="Volatility Index($VIX)")
```

```{r}
plot(vix$Adj.Close, type = "l", main="Volatility Index($VIX)")
acf(vix$Adj.Close, main="Autocorrelation plot of Vix Adj Close")

```

We can see the spikes related to the Covid-19 pandemic time frame.

The ACF( ) function estimates of the autocovariance or autocorrelation function, as seen in the plot it's possible to detect tails and pretty much any time lag shown.

```{r}
installed.packages("rugarch")
library(rugarch)
library(dplyr)
library(fpp2)
library(ggplot2)
```

```{r}
vixp<-vix$Adj.Close
v <- auto.arima(vixp)
summary(v)

ggplot()+

plot(v$residuals)
checkresiduals(v)
```

Residual does not fit properly in the Arima model generated by the function auto.arima( ), this may not be the right model to describe the data.

```{r}
lg <- diff(log(vixp))
plot(lg, type="l", main="Transformation through differenciation and logarithm")
acf(lg^2) 

barplot(lg, col="lightblue",include.lowest = TRUE, main="Histogram ")

gar <- ugarchspec(variance.model=list(model="sGARCH", garchOrder=c(1,1)),
mean.model=list(armaOrder=c(1,1)), distribution.model = "norm")

fit <- ugarchfit(spec = gar, data = vixp)
infocriteria(fit)
plot(fit@fit$z, type="l")

forecast <- ugarchforecast(fit,n.ahead = 40)
plot(forecast)
```

Cross validation of models may pass through
